<%# app/views/memorial/index.html.erb %>
<%= stylesheet_link_tag "dashboard", "data-turbo-track": "reload" %>
<%= stylesheet_link_tag "memorial", "data-turbo-track": "reload" %>

<div class="dashboard-container">

  <!-- Card do Memorial -->
  <div class="welcome-card">
    <h1 class="welcome-title">
      ğŸ•Šï¸ Pet Memorial
    </h1>
    
    <% if @has_deceased_pets %>
      <p class="welcome-subtitle">
        Em memÃ³ria dos nossos amados animais de estimaÃ§Ã£o ğŸ’™
      </p>
    <% end %>
    
    <div class="welcome-actions">
      <%= link_to "â† Voltar ao Dashboard", user_path(current_user), class: "btn-secondary-custom" %>
    </div>
  </div>

  <!-- SeÃ§Ã£o do Memorial -->
  <div class="pets-section">
    <% if @has_deceased_pets %>
      <div class="pets-header">
        <div>
          <h2 class="pets-title">ğŸŒŸ Pets que partiram</h2>
          <p class="pets-subtitle">Guardados para sempre em nossos coraÃ§Ãµes</p>
        </div>
        <div class="pets-counter">
          <%= @deceased_pets.count %> <%= @deceased_pets.count == 1 ? 'pet' : 'pets' %>
        </div>
      </div>

      <div class="pets-grid">
        <% @deceased_pets.each do |pet| %>
          <div class="pet-card pet-tribute">
            
            <!-- DecoraÃ§Ã£o -->
            <div class="pet-card-decoration"></div>
            
            <!-- ConteÃºdo Principal -->
            <div class="pet-card-content">
              <div class="pet-avatar">
                <% if pet.photo_attached? %>
                  <%= image_tag pet.photo_data_uri, alt: pet.name %>
                <% else %>
                  <div class="pet-photo-placeholder">
                    <%= pet.name.first.upcase %>
                  </div>
                <% end %>
              </div>
              
              <h3 class="pet-name">
                <%= pet.name %>
              </h3>
              
              <p class="pet-info">
                <%= pet.species %> â€¢ <%= pet.breed || 'SRD' %>
              </p>

              <% if pet.date_of_death.present? %>
                <div class="pet-death-info">
                  <p class="death-date-label">Faleceu em</p>
                  <p class="death-date"><%= pet.formatted_death_date %></p>
                </div>
              <% end %>
            </div>
            
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="empty-state">
        <div class="empty-state-icon">ğŸ•Šï¸</div>
        <p class="empty-state-text">
          NÃ£o hÃ¡ nenhum pet no memorial
        </p>
        <p class="empty-state-subtext">
          Todos os seus pets estÃ£o bem e saudÃ¡veis! ğŸ’š
        </p>
      </div>
    <% end %>
  </div>

</div>
