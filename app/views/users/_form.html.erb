<%= form_with model: @user, html: { multipart: true } do |f| %>
  <% if @user.errors.any? %>
    <div class="errors">
      <h3><%= pluralize(@user.errors.count, "error") %> proibiram salvamento:</h3>
      <ul>
        <% @user.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-3 text-center">
    <%= f.label :photo_upload, "Foto de Perfil", class: "form-label fw-bold" %><br>

    <% if @user.photo_attached? %>
      <img src="<%= @user.photo_data_uri %>"
           alt="Foto do usuÃ¡rio"
           class="img-thumbnail mb-2"
           style="max-width: 130px; border-radius: 50%;">
      <br>

      <%= link_to "Remover foto",
          remove_photo_user_path(@user),
          data: { turbo_method: :delete},
          class: "btn btn-sm btn-outline-danger mt-2" %>

    <% else %>
      <div class="text-muted mb-2">Nenhuma foto enviada</div>
    <% end %>

    <%= f.file_field :photo_upload, class: "form-control mt-2" %>
  </div>

  <div class="mb-3">
    <%= f.label :first_name, 'Primeiro Nome', class: 'form-label fw-bold' %>
    <%= f.text_field :first_name, class: 'form-control' %>
  </div>

  <div class="mb-3">
    <%= f.label :last_name, 'Sobrenome', class: 'form-label fw-bold' %>
    <%= f.text_field :last_name, class: 'form-control' %>
  </div>

  <div class="mb-3">
    <%= f.label :email, 'Email', class: 'form-label fw-bold' %>
    <%= f.email_field :email, class: 'form-control' %>
  </div>

  <div class="mb-3">
    <%= f.label :password, 'Senha (deixe em branco para manter a mesma)', class: 'form-label' %>
    <%= f.password_field :password, class: 'form-control' %>
  </div>

  <div class="mb-3">
    <%= f.label :password_confirmation, 'Confirmar senha', class: 'form-label' %>
    <%= f.password_field :password_confirmation, class: 'form-control' %>
  </div>

  <%= f.submit 'Salvar', class: 'btn-primary-custom' %>
  <%= link_to 'Cancelar', @user, class: 'btn btn-outline-danger ms-2' %>
<% end %>
